<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="author" content="Heanes heanes.com email(heanes@163.com)">
    <meta name="keywords" content="软件,商务,HTML,tutorials,source codes">
    <meta name="description" content="描述">
    <link rel="stylesheet" type="text/css" href="css/treeView.css"/>
    <link rel="stylesheet" type="text/css" href="demo/css/demo.css"/>
    <link rel="stylesheet" type="text/css" href="demo/css/font-awesome.min.css"/>
    <title>treeView Demo</title>
</head>
<body>
<div class="wrap">
    <div class="tree-top-wrap">
        <ul class="tree-top-list">
            <li class="active"><span class="node-wrap"><i class="icon node-icon fa fa-list"></i><span class="node-text">常用功能</span></span></li>
            <li><span class="node-wrap"><i class="icon node-icon fa fa-list"></i><span class="node-text">内容编辑</span></span></li>
            <li><span class="node-wrap"><i class="icon node-icon fa fa-list"></i><span class="node-text">网站设置</span></span></li>
            <li><span class="node-wrap"><i class="icon node-icon fa fa-list"></i><span class="node-text">站长维护</span></span></li>
        </ul>
    </div>
    <div class="tree-left">
        <div class="tree-list-lap">
            <a href="javascript:" class="lap-handle" title="收缩/展开">
                <i class="fa fa-exchange" aria-hidden="true"></i>
            </a>
        </div>
        <div class="tree-list-wrap">
            <ul class="tree-group">
                <li class="tree-node active">
                    <span class="node-wrap">
                        <!-- 当有子菜单时显示折叠展开的图标 -->
                        <i class="node-collapse-expand-icon"></i>
                        <i class="node-icon fa fa-list"></i>
                        <span class="node-text">菜单1</span>
                    </span>
                    <ul class="tree-group">
                        <li class="tree-node active" data-nodeId="0">
                            <span class="node-wrap">
                                <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                                <span class="indent"></span>
                                <i class="node-collapse-expand-icon"></i>
                                <i class="node-icon fa fa-list"></i>
                                <span class="node-text">菜单1.1</span>
                            </span>
                            <ul class="tree-group">
                                <li class="tree-node" data-nodeId="1">
                                    <span class="node-wrap">
                                        <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                                        <span class="indent"></span>
                                        <span class="indent"></span>
                                        <i class="node-icon fa fa-list"></i>
                                        <span class="node-text">菜单1.1.1</span>
                                    </span>
                                </li>
                                <li class="tree-node" data-nodeId="2">
                                    <span class="node-wrap">
                                        <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                                        <span class="indent"></span>
                                        <span class="indent"></span>
                                        <i class="node-icon fa fa-list"></i>
                                        <span class="node-text">菜单1.1.2- 很长很长的长文字</span>
                                    </span>
                                </li>
                            </ul>
                        </li>
                        <li class="tree-node" data-nodeId="3">
                            <span class="node-wrap">
                                <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                                <span class="indent"></span>
                                <i class="node-icon fa fa-list"></i>
                                <span class="node-text">菜单1.2</span>
                            </span>
                        </li>
                    </ul>
                </li>
                <li class="tree-node" data-nodeId="4">
                    <span class="node-wrap">
                        <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                        <i class="node-icon fa fa-list"></i>
                        <span class="node-text">菜单2</span>
                    </span>
                </li>
            </ul>
            <ul class="tree-group">
                <li class="tree-node active">
                    <a href="#">
                        <!-- 当有子菜单时显示折叠展开的图标 -->
                        <i class="node-collapse-expand-icon"></i>
                        <i class="node-icon fa fa-list"></i>
                        <span class="node-text">菜单1</span>
                    </a>
                    <ul class="tree-group">
                        <li class="tree-node active" data-nodeId="0">
                            <a href="#">
                                <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                                <span class="indent"></span>
                                <i class="node-collapse-expand-icon"></i>
                                <i class="node-icon fa fa-list"></i>
                                <span class="node-text">菜单1.1</span>
                            </a>
                            <ul class="tree-group">
                                <li class="tree-node" data-nodeId="1">
                                    <a href="#">
                                        <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                                        <span class="indent"></span>
                                        <span class="indent"></span>
                                        <i class="node-icon fa fa-list"></i>
                                        <span class="node-text">菜单1.1.1</span>
                                    </a>
                                </li>
                                <li class="tree-node" data-nodeId="2">
                                    <a href="#">
                                        <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                                        <span class="indent"></span>
                                        <span class="indent"></span>
                                        <i class="node-icon fa fa-list"></i>
                                        <span class="node-text">菜单1.1.2- 很长很长的长文字</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="tree-node" data-nodeId="3">
                            <a href="#">
                                <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                                <span class="indent"></span>
                                <i class="node-icon fa fa-list"></i>
                                <span class="node-text">菜单1.2</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="tree-node" data-nodeId="4">
                    <a href="#">
                        <!-- 当有子菜单时添加缩进+显示折叠展开的图标 -->
                        <i class="node-icon fa fa-list"></i>
                        <span class="node-text">菜单2</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
<script type="text/javascript" src="resource/jquery.2.2.4.js"></script>
<script type="text/javascript" src="js/treeView.js"></script>
<script type="text/javascript">
    $(function () {
        $('#lapHandle').on('click', function (event) {
            var $treeListWrap = $('.tree-list-wrap');
            var $lapParent = $(this).closest('.tree-list-lap');
            if($lapParent.hasClass('lapped')){
                $lapParent.removeClass('lapped');
                $treeListWrap.removeClass('lapped');
            }else{
                $lapParent.addClass('lapped');
                $treeListWrap.addClass('lapped');
            }
        });
        var treeData = [
            {
                "text": "父菜单1",
                "nodeIcon": "",
                "href": "",
                "iconSelected": "",
                "color": "",
                "backgroundColor": "",
                "colorOnHover": "",
                "backgroundColorOnHover": "",
                "selectable": true,
                "state": {
                    "selected": false,
                    "expanded": true,
                    "disabled": false,
                    "checked": false
                },
                "nodes": [
                    {
                        "text": "子菜单1.1",
                        "nodeIcon": "fa fa-edit",
                        "href": "b.html",
                        "iconSelected": "",
                        "color": "",
                        "backgroundColor": "",
                        "colorOnHover": "",
                        "backgroundColorOnHover": "",
                        "selectable": true,
                        "state": {
                            "selected": false,
                            "expanded": true,
                            "disabled": false,
                            "checked": false
                        },
                        "nodes": []
                    },
                    {
                        "text": "子菜单1.2",
                        "nodeIcon": "",
                        "href": "b.html",
                        "iconSelected": "",
                        "color": "",
                        "backgroundColor": "",
                        "colorOnHover": "",
                        "backgroundColorOnHover": "",
                        "selectable": true,
                        "state": {
                            "selected": false,
                            "expanded": true,
                            "disabled": false,
                            "checked": false
                        },
                        "nodes": [
                            {
                                "text": "子菜单1.2.1",
                                "nodeIcon": "",
                                "href": "b.html",
                                "iconSelected": "",
                                "color": "",
                                "backgroundColor": "",
                                "colorOnHover": "",
                                "backgroundColorOnHover": "",
                                "selectable": true,
                                "state": {
                                    "selected": false,
                                    "expanded": true,
                                    "disabled": false,
                                    "checked": false
                                },
                                "nodes": []
                            }
                        ]
                    },
                    {
                        "text": "子菜单1.3",
                        "nodeIcon": "",
                        "href": "b.html",
                        "iconSelected": "",
                        "color": "",
                        "backgroundColor": "",
                        "colorOnHover": "",
                        "backgroundColorOnHover": "",
                        "selectable": true,
                        "state": {
                            "selected": false,
                            "expanded": true,
                            "disabled": false,
                            "checked": false
                        },
                        "nodes": [
                            {
                                "text": "子菜单1.3.1",
                                "nodeIcon": "",
                                "href": "b.html",
                                "iconSelected": "",
                                "color": "",
                                "backgroundColor": "",
                                "colorOnHover": "",
                                "backgroundColorOnHover": "",
                                "selectable": true,
                                "state": {
                                    "selected": false,
                                    "expanded": true,
                                    "disabled": false,
                                    "checked": false
                                },
                                "nodes": []
                            }
                        ]
                    }
                ]
            },
            {
                "text": "父菜单2",
                "nodeIcon": "",
                "href": "",
                "iconSelected": "",
                "color": "",
                "backgroundColor": "",
                "colorOnHover": "",
                "backgroundColorOnHover": "",
                "selectable": true,
                "state": {
                    "selected": false,
                    "expanded": true,
                    "disabled": false,
                    "checked": false
                },
                "nodes": [
                    {
                        "text": "子菜单2.1",
                        "nodeIcon": "",
                        "href": "b.html",
                        "iconSelected": "",
                        "color": "",
                        "backgroundColor": "",
                        "colorOnHover": "",
                        "backgroundColorOnHover": "",
                        "selectable": true,
                        "state": {
                            "selected": false,
                            "expanded": true,
                            "disabled": false,
                            "checked": false
                        },
                        "nodes": []
                    },
                    {
                        "text": "子菜单2.2",
                        "nodeIcon": "",
                        "href": "b.html",
                        "iconSelected": "",
                        "color": "",
                        "backgroundColor": "",
                        "colorOnHover": "",
                        "backgroundColorOnHover": "",
                        "selectable": true,
                        "state": {
                            "selected": false,
                            "expanded": true,
                            "disabled": false,
                            "checked": false
                        },
                        "nodes": []
                    }
                ]
            }
        ];
        var treeView = true;
        if(treeView) {
            $('.tree-left').treeView({
                data: treeData,
                iconCollapse: 'triangle-right',         // 合上时的图标
                iconExpand: 'triangle-down',            // 展开时的图标
                enableIndentLeft: true,                 // 允许向左缩进
                onNodeSelected: function (event, node) {
                    console.log('节点被点击：');
                    console.log(node);
                }
            });
        }

        var nodeConf = {
            id: '',                     // ID
            text: '',                   // 名称
            href: '',                   // 链接
            nodeIcon: '',               // 节点图标
            iconSelected: '',           // 选中后激活的图标
            color: '',                  // 前景颜色
            backgroundColor: '',        // 背景颜色
            colorOnHover: '',           // 鼠标浮上时的前景颜色
            backgroundColorOnHover: '', // 鼠标浮上时的背景颜色
            selectable: true,           // 指定列表树的节点是否可选择。设置为false将使节点展开，并且不能被选择
            state: {
                selected: false,        // 选中的
                expanded: false,        // 是否展开的
                disabled: false,        // 是否启用的
                checked: false          // 是否勾选的，指示一个节点是否处于checked状态，用一个checkbox图标表示
            },
            nodes: [],                  // 子节点
            some: ''                    // 待用
        };
        //console.log('***********************');
        var treeDataSimple = [
            {
                "text": "父菜单1",
                "nodes": []
            },
            {
                "text": "父菜单2",
                "nodes": [
                    {
                        "text": "子菜单2.1",
                        "nodes": []
                    },
                    {
                        "text": "子菜单2.2",
                        "nodes": [
                            /*{
                                "text": "子菜单2.2.1",
                                "nodes": [
                                    {
                                        "text": "子菜单2.2.1.1",
                                        "nodes": []
                                    }
                                ]
                            }*/
                        ]
                    }
                ]
            },
            {
                "text": "父菜单3",
                "nodes": [
                    {
                        "text": "子菜单3.1",
                        "nodes": []
                    },
                    {
                        "text": "子菜单3.2",
                        "nodes": [
                            {
                                "text": "子菜单3.2.1",
                                "nodes": []
                            },
                            {
                                "text": "子菜单3.2.2",
                                "nodes": []
                            }
                        ]
                    }
                ]
            }
        ];
        var $target = $('<div class="wrap"></div>');
        var $groupWrap = $('<div class="group-wrap"></div>');
        function testRecursive(data, level) {
            level += 1;
            var $ul = level == 1 ? '' : $('<ul></ul>');
            $.each(data, function addNodes(i, item) {
                // 第一级节点都用ul包住
                level == 1 ? $ul = $('<ul></ul>') : null;

                var $li = $('<li></li>');
                $li.append(item.text);
                $ul.append($li);
                console.log('level:' + level);
                if(item.nodes && item.nodes.length > 0){
                    $li.append(testRecursive(item.nodes, level));
                }
                if(level == 1){
                    $target.append($ul);
                }
                /*console.log('target:' + $target.html());
                console.log('level-after:' + level);
                console.log('-----------------------------------');*/
            });
            console.log('level > 1 : ul:' + $ul.html());
            return $ul;
        }
        //$target.append(testRecursive(treeDataSimple, 0));
        $('body').append($target);
        //console.log($target.html());

    });
</script>
</body>
</html>